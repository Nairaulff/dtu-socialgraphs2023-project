introduction x-ray transmission ptychography coherent diffractive imaging cdi achieve nanoscale resolution measuring multiple diffraction pattern scanning x-ray probe across object interest resolution limited spatial frequency diffracted signal unlike conventional cdi take diffraction pattern isolated sample ptychography image extended sample scanning sample finite illumination acquire series diffraction pattern typical ptychography experiment collect large number diffraction pattern cover extended region sufficient overlapping achieve high-resolution reconstruction image however traditional scan used capture object typically include large portion unwanted unnecessary region example empty background thus imposing high expenditure computational resource reconstruction region may interest currently x-ray ptychography order reduce data acquired area region interest roi initial coarse scan large field view fov performed estimate object roi position followed finer scan smaller fov approach reduces scanning region rectangular square scan fov still cover significant portion unwanted data point especially scanned object particle cell type case ptychographic tomography additional empty region even added purpose increase scan fov accommodate sample drift rotation error expected uninformative reconstruction therefore highly desirable extract informative data point needed perform satisfying ptychographic reconstruction minimum computational cost various technique developed use information directly extracted diffraction pattern approximate desired information regarding object example aforementioned approach pre-coarse scan estimate roi ptychography absorption contrast obtained total transmitted intensity scan point provide coarse quick overview scanned region moreover resolution common microscopy technique limited beam size feature sample smaller beam size hard detect without performing advanced imaging reconstruction technique weak absorbing object obtaining good absorption contrast hard x-ray challenging since phase gradient object deflect x-ray result intensity redistribution detector method based mechanism proposed visualize weak absorbing object example scattering power evaluation proposed map ratio scattered photon incident photon individual scan position give immediate online feedback location biological specimen differential phase contrast obtained plotting moment diffraction pattern function position also provides strong contrast absorption object composed light element beyond scattering power moment information embedded diffraction pattern example sample feature size shape orientation extracted small-angle x-ray scattering obtain deeper understanding material property technique provide immediate feedback mapping scattering transmission property object within field view automatic robust method identify important data used reconstruction lacking therefore explore machine learning technique achieve automatic data selection without human intervention particular unsupervised learning drawn considerable attention scientific community robustness without requiring labeled data often difficult acquire lack ground truth unsupervised learning successfully applied different aspect ptychography identifying probe diminished quality clustering different oxidation behavior inside material work utilize combined knowledge object transmission scattering direction information propose physics-informed unsupervised learning algorithm identify diffraction pattern scan position within roi feature smaller beam size also detected identified preprocessing diffraction pattern segmenting azimuthally outcome identified diffraction pattern used reconstruction saving computational resource achieving reconstruction quality comparable using entire dataset result since ultimate goal optimally use computational resource important data without sacrificing reconstruction quality qualitatively examine reconstruction quality using identified diffraction pattern represent roi roi identified term scanning position study effect roi accuracy reconstruction quality adjusting size area referred border size included reconstruction example increasing border size fig four step size outwards along x-direction y-direction increase roi data shown fig similarly decreasing border size eight step size fig inwards along x-direction y-direction result reduction total diffraction pattern shown fig resulting reconstruction either increasing decreasing roi area shown fig respectively see reconstruction true sample area comparable however expected boundary fov shown fig noisier compared fig lack diffraction pattern location figure starting identified roi shown fig expanding roi four step size outwards along xy-directions corresponding reconstruction shrinking roi eight step size inwards along xy-directions corresponding reconstruction full size image quantitatively examine reconstruction quality using reduced number diffraction pattern compare reconstruction using full dataset using downselected diffraction pattern corresponding identified roi specific using reconstruction image full set diffraction pattern fig reference image calculate structural similarity index measure ssim reference image partial reconstruction use state-of-the-art package ptychoshelves reconstruction setting batch size total diffraction pattern perform five independent reconstruction test case obtain average behavior numerical experiment implemented matlab performed platform single nvidia geforce rtx gpu fig decrease border size shrink area roi reconstruction quality degrades gradually expected meanwhile ssim plateau increase border size around word increasing number diffraction pattern beyond point yield marginal benefit reconstruction quality object thus suggesting effectiveness identified roi next provide empirical complexity analysis demonstrate overall computational cost reduction achieved proposed method time needed reconstruction diffraction pattern minute whereas running reconstruction using retained diffraction pattern specifically border size consisting around total number diffraction pattern identified method take minute roughly time required full reconstruction total time needed preprocessing step identify roi order second includes center mass com calculation second k-means clustering second since almost entirety second spent calculating com every diffraction pattern dataset one conservatively estimate half second needed every diffraction pattern dataset therefore preprocessing time general negligible compared expensive reconstruction figure reconstruction quality measured ssim reference image reconstruction using full dataset reconstruction obtained different roi adjusted different border size point mean value five independent reconstruction error bar data point shown due minuscule variability becomes invisible scale higher border size give higher ssim due diffraction pattern surrounding identified roi reconstruction whereas negative border size shrink roi includes fewer diffraction pattern therefore yielding lower ssim identified roi robust sense small adjustment doe change reconstruction quality significantly full size image segmentation-based small feature detection demonstrated combining two different modality namely scattering absorption provide complementary information sample property automatically classifying combined information extract informative region interest accelerate performance sample reconstruction however calculating sum com entire diffraction pattern reflect absorption scattering may fail represent object feature smaller beam size consider phase reconstruction sample shown fig several small particle surround main particle situated middle sample size surrounding particle smaller beam size shown inset calculating com diffraction pattern following step described method section generate com quiver plot represents scattering direction scan position shown fig see information small particle lost visible scattering direction plot therefore undetectable following clustering step case diffraction pattern scan position small feature present may show anisotropic scattering due interaction small feature various orientation result aggregating information considering diffraction pattern whole average calculated com making difficult detect clear scattering direction consequently failing identify precise region interest drawing inspiration method segment diffraction pattern differential phase contrast imaging propose remedy issue segmenting diffraction pattern different azimuthal segment first calculating com segment separately.to clarify first divide diffraction pattern various azimuthal segment next calculate com segment individually final scattering plot obtained combining separately calculated scattering plot individual segment key step proposed method outlined flowchart shown fig eight segment example method allows detection individual scattering direction caused feature smaller beam size within single diffraction pattern leveraged truthfully determine final roi provide quick demonstration dividing diffraction pattern four azimuthal segment shown fig 90^ correspondingly calculate segment absorption com instead diffraction pattern entirety see shown fig using third segment diffraction pattern example obtained scattering direction plot detect smaller particle use third segment example note smaller particle also detected segment diffraction pattern used figure ptychographic reconstruction sample small particle smaller beam size inset show probe size scale generated com scattering direction quiver plot using entire diffraction pattern small particle surrounding main object visible sectioning diffraction pattern four azimuth segment 90^ com scattering direction plot generated using third segment instead entire diffraction pattern case small particle visible compared full size image next apply clustering method described method section segmented diffraction pattern separately generate corresponding roi map scan point could labeled either within set roi point belonging background using example fig order incorporate information four segment generated four different roi map similar shown fig roi map automatically aligned combined scan point deemed within roi using segment labeled final list scan point within roi comparison purpose roi cluster shown diffraction pattern separated different number segment fig segmentation applied resulting clustered roi using fig shown fig small particle detected easily identifiable manner figure show final clustered result diffraction pattern segregated four segment seen fig small particle left identified included final list scan position within roi increase number segment eight 45^ shown fig sensitivity increase smaller particle right object also successfully detected identified however number segment increased sixteen 22.5^ twenty-four 15^ seen fig respectively new particle show instead noise becomes labeled roi result amplified figure show result segregating diffraction pattern forty segment extreme case almost three-quarters entire scan position labeled within roi information longer useful term separating background object segmenting diffraction pattern eight segment sufficient obtain small particle position information surrounding main object clear contrast background figure flowchart outlining key step proposed method using eight segment example diffraction pattern first segmented eight segment allowing com i.e. scattering informaiton sum i.e transmission information calculated segment show dimension element square bracket calculated com sum segment every diffraction pattern combined respective segment bin k-means clustering applied individual bin separate roi background clustered result identifies roi bin ultimately combined return final identified roi full size image figure identified roi map result performing clustering total 1,836 preprocessed diffraction pattern estimated snr 6.38 covering area horizontal step size 0.3 vertical step size 0.4 segmented follows one segment i.e. whole diffraction pattern segmentation 42.7\ diffraction pattern identified within region interest four segment around 51.2\ diffraction pattern identified within region interest particle smaller beam size left object successfully identified eight segment 52.2\ diffraction pattern identified within region interest another particle smaller beam size right object also successfully identified sixteen segment 53.6\ diffraction pattern identified within region interest increase sensitivity time number diffraction pattern segment increased random noise across field view introduced point twenty-four segment 57.8\ diffraction pattern identified within region interest forty segment 73.9\ diffraction pattern identified within region interest full size image figure show phase reconstruction performed different number diffraction pattern segmentation i.e. clustered scan position shown fig a–c comparing segmentation fig four segment fig eight segment fig see segment increase contrast small particle background becomes enhanced shown blue box fig red box fig figure ptychographic reconstruction using diffraction pattern identified scan position shown fig clustering algorithm performed whole diffraction pattern ptychographic reconstruction using diffraction pattern identified scan position shown fig clustering algorithm performed preprocessing diffraction pattern splitting four segment ptychographic reconstruction using diffraction pattern identified scan position shown fig clustering algorithm performed preprocessing diffraction pattern splitting eight segment diffraction pattern gradually split higher number segment reconstruction show higher contrast small particle background indicated colored box full size image compare result imaging result several conventional method first hilbert-differential phase-contrast hdpc show differential phase contrast horizontal direction shown fig second scanning transmission x-ray microscopy stxm absorption contrast mapped corresponding scan position shown fig third computational approach toward dark-field imaging different method implemented segmenting diffraction pattern circular mask annular mask divide diffraction pattern two region applying circular mask center diffraction pattern circular mask applied pixel belonging direct transmitted beam fall within mask sum value pixel used feature directly give absorption sensitivity result identical stxm similarly pixel fall outside mask belong high-frequency region summation value pixel attributed scattering object directly give scattering sensitivity shown fig provide comparison estimating roi method proposed segmented com clustering method apply k-means clustering algorithm image obtained method taking absolute value data shown fig apply k-means clustering separate dataset two cluster background roi object result shown fig figure obtained applying k-means absorption sensitivity data shown fig two cluster figure obtained way applying k-means directly data shown fig three case particle smaller beam size identified compared result segmented com clustering method shown fig figure result conventional imaging method hilbert-differential phase-contrast scanning transmission x-ray microscopy computational approach dark-field imaging circular mask applied center diffraction pattern pixel outside mask summed serve feature representing scattering sensitivity estimated roi using k-means clustering data shown respectively three case particle surrounding main object smaller beam size identified compared result segmented com clustering method shown fig full size image discussion conclusion proposed unsupervised learning framework successfully classify important data corresponding region interest ultimately lead decrease time reconstruction preserving high reconstruction quality importantly exploit information provided different data modality correlated also complementary example absorption contrast mostly effective identifying region high optical density fails region low optical density hand scattering orientation information form com diffraction pattern excels detecting scattered light change effective region feature change combined use multimodal information absorption contrast scattering orientation directly extracted diffraction pattern complement otherwise incomplete object information case object weakly absorbing absorption contrast may fail providing needed complementary data scattering data still succeed providing boundary information depending need additional fill-in function included algorithm fill-in area within identified boundary based scattering information include towards roi reconstruction perform classification demonstrate k-means provides stable result different sample two cluster chosen efficiently separate object background although two cluster sufficient towards identifying object empty background even object consists different material worthwhile direction enhance method beyond identifying current two cluster example increasing number partition cluster different material successfully identified due difference corresponding absorption scattering property however robust method estimate optimal number cluster needed best represents different material within field view require investigation selecting threshold calculated feature considered trivial order determine adjust roi instead using k-means would still require form human intervention opposed proposed method presented unsupervised classification method valuable situation example hundred thousand scan sample taken period time investigate change sample time case manually selecting different threshold variable scan become issue human judgement needed demonstrate application proposed method experimental datasets show identified important diffraction pattern total processing time including preprocessing reconstruction dramatically reduced without sacrificing reconstruction quality importantly demonstrate segmenting diffraction pattern smaller particle compared beam size also detected identified developed method potential solving problem may benefit obtaining immediate preview resulting reconstruction detecting feature smaller beam size identifying diffraction pattern relate region interest removing unwanted data prior committing time toward reconstruction one future direction instead performing simple raster scan entire field view extend proposed method provide feedback important data real time facilitate optimal experimental scanning pattern based morphology object order save overall data acquisition time presented method currently demonstrated isolated-type sample commonly required tomography ptychography ptychographic laminiography extended sample featureless background different contrast mechanism simultaneously acquired correlated fluorescence signal better extract roi explored built list classification method method describe diffraction pattern n\times k=1 n\times corresponding diffraction pattern size two-dimensional com array calculated aligned ^k\right i=1 i\sum j=1 j\sum ^k\right aligned sum pixel value entire diffraction pattern namely t^k=\sum ^k\ calculating com according diffraction pattern return k\times whose row represents coordinate com diffraction pattern calibrate beam-center offset error represent row vector origin calibrated center image transform standard normal distribution form zero mean unit variance aligned =\left k=1 ^k-\bar ^k-\bar k=1 aligned _y\right mean standard deviation first second column respectively magnitude row vector correlated strength scattered light caused object scanning position yield characteristic information regarding outline shape object demonstrate characteristic information embedded com array experimental dataset acquired velociprobe instrument advanced photon source secondary particle composed batch nanosheets imaged 8.8 kev fly-scan mode probe size diameter object moved continuously series diffraction pattern acquired eiger 500k detector total 15,980\ diffraction pattern covering area horizontal step size 0.06 vertical step size 0.1 estimated snr 5.6 collected continuous frame rate second diffraction pattern cropped cropped diffraction patter used reconstruction generalized least-squares maximum likelihood algorithm implemented ptychoshelves package figure show reconstructed phase using complete dataset com vector array dataset calculated using shown fig quiver plot providing map scattering direction object complementary modality oriented scattering information present com array exploit absorption contrast image obtained total signal recorded pixelated area detector scan position t^k\ order filter noisy data mean filter size applied absorption contrast image com magnitude image shown base- log scale fig respectively figure reconstruction diffraction pattern quiver plot representing calculated com vector diffraction pattern scan position serf map scattering direction information object highlight feature change area including multiple band top image full size image figure scatter plot natural log value sum pixel diffraction pattern scanning position scatter plot natural log value magnitude arrow scattering direction plot seen fig full size image given characteristic information embedded two complementary modality explore unsupervised clustering technique classify different type feature first apply k-means iteration partition absorption contrast two cluster cluster lower value corresponds diffraction pattern lower light transmission due object absorption vice versa total diffraction pattern identified labeled blue dot corresponding scan position fig constitutes first part roi cluster similarly apply k-means partition magnitude com array two cluster cluster diffraction pattern higher com magnitude corresponds higher gradient change term scattering strength reflects outline roi second part roi cluster dataset total diffraction pattern belonging cluster identified shown fig final step combine two identified cluster obtain complete roi cluster counting overlapping diffraction pattern total diffraction pattern obtained reducing roi data total data shown fig corresponding reconstruction using identified diffraction pattern roi shown fig figure roi cluster identified high absorption region roi cluster identified high scattering region combined roi cluster reconstruction object using retained diffraction pattern full size image