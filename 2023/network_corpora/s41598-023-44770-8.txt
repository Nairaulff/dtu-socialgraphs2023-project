introduction wearable ultrasound device continuous monitoring miniaturization ultrasound device enables smart medical imaging device i.e. wearable device collect process medical image real time since tissue amenable conventional diagnostic ultrasound imaging may benefit capability longitudinal monitoring smart medical imaging device many clinical application including blood pressure monitoring neuromodulation bladder volume monitoring blood pressure monitoring segmenting blood vessel consecutive ultrasound image frame calculating blood pressure diameter avoids discomfort cuff inflation oscillometric measurement another application pashaei segmented vagus nerve ultrasound image used segmentation guide ultrasound beam neural therapy ultrasound imaging currently used estimate bladder volume due portability non-ionizing radiation low cost bladder volume estimated segmented bladder mask ultrasound image see fig however current approach utilizing ultrasound imaging limited continuous monitoring due following conventional handheld ultrasound device measurement must performed operator making continuous monitoring unfeasible commercially available continuous monitoring device measure depth profile instead forming full image compromise volume estimation accuracy power efficiency current point care ultrasound system sufficiently energy efficient permit wearable device deployment continuous bladder volume monitoring help diagnose incontinence urine retention reduces need indwelling urinary catheter instance 70\ surgery patient experience post-operative urinary retention pour inability urinate surgical procedure despite full bladder may accompanied discomfort bladder spasm urine leakage may also progress renal obstruction acute chronic kidney injury ultimately renal failure pour easily managed reversed via intermittent indwelling urinary catheterization diagnosed however 60\ patient symptom masked unnoticed due anesthesia analgesia insensitivity related chronicity obstruction leading poor post-operative outcome urinary tract infection prolonged bladder overdistension increased length hospital stay continuous bladder monitoring pour diagnosed early stage prevent future complication context long-term care facility 7â€“10 resident urinary catheter however management strategy aggressive bladder drainage via catheterization optimal due poor patient acceptance high rate complication catheter-associated unitary tract infection cauti fact wealth literature risk indwelling catheter hospitalized patient led national effort reduce urinary catheter utilization continuous monitoring urinary bladder volume could ensure newly developed urinary retention never missed facilitate early catheter removal fact may form important pillar reduce cauti advocated agency healthcare research quality overcome limitation current ultrasound system enable real-time volume monitoring developed energy-efficient image segmentation algorithm coupled existing body contour ultrasound patch algorithm enables continuous automatic accurate bladder volume estimate real time image captured wearable ultrasound patch figure outline device operation ultrasound patch collect ultrasound image segmenting bladder region transverse sagittal plane calculating area segmented region using area input double area method estimate urine volume enable edge employment real-time segmentation without significant increase energy cost algorithm require floating-point support use minimal memory compute resource figure proposed clinical workflow bladder patch device volume estimation ultrasound patch collect image lightweight segmentation algorithm run asic wearable device bladder volume calculated full size image neural network medical image segmentation recently neural network nns gained popularity various medical image segmentation application including ultrasound imaging commonly used architecture medical imaging u-net panoptic deeplabv3+ u-net encoder-decoder structure popular segmentation architecture shown past medical image segmentation work panoptic feature pyramid network fpns initially designed unifying instance segmentation semantic segmentation nonetheless lightweight yield high accuracy semantic segmentation deeplab3+ spatial pyramid pooling extract contextual information multiple scale since segmentation network typically billion computation million parameter previous work focused quantization convolutional layer askarihemmat used 4-bit weight 6-bit input convolutional layer u-net ternarynet proposed using ternary quantization function activation function used continuous adaptation tanh back-propagation achieving mostly ternarized u-net medq used extensive parameter-free skip connection tanh back-propagation distributional loss achieve binarization ternarization convolutional layer u-net previous work used skip connection distribution learning binarize u-net panoptic fpn deeplab3+ work significantly reduce network size still unsuitable low-power low-cost edge deployment several reason first skip connection encoder decoder branch floating-point feature map since value requires bit hundred thousand intermediate value require either large on-chip static random-access memory sram external access dynamic random-access memory dram on-chip sram dominates chip area thereby increasing asic cost external dram chip also increase product cost second floating-point calculation still needed first convolutional layer batchnorm layer skip connection detail supplementary table addition consumes 30\times\ energy 8-bit fixed-point addition multiply 5.5\times\ energy-consuming 8-bit fixed-point multiply lastly latency concern bladder monitoring real-time tissue monitoring task cardiac motion stricter latency requirement lowering computation requirement number memory access make algorithm run faster satisfying real-time requirement autonomous ultrasound monitoring device therefore given wearable medical device chip area energy constraint require fully quantized network low-bitwidth skip connection floating-point operation contribution work address challenge deploying resource-hungry nns smart medical device present validate power memory efficient deep learning model accurately segmenting bladder region calculating urine volume train model bladder image captured clinical ultrasound system multiple model varying precision proposed allowing trade-off among accuracy memory power requirement calculating bladder volume presented target application work potential serve platform technology deployable across wide range wearable health-monitoring device application require accurate real-time autonomous monitoring edge method data collection curation dataset bladder ultrasound image collected retrospectively patient undergoing various bladder imaging procedure massachusetts general hospital usa february october mass general brigham mgb institutional review board irb approved study protocol 2020p001599 requirement informed consent waived per mgb irb method performed accordance relevant guideline regulation including declaration helsinki four hundred thirty four patient randomly selected retrospective database ultrasound bladder image bladder image sagittal transverse view image bladder wall could visualized properly due poor image quality removed image gathered using curvilinear probe healthcare chicago philip philip amsterdam netherlands ultrasound system dataset annotated five physician year experience bladder ultrasound interpretation subjectivity image annotation especially considering image annotated one physician rather panel physician inner outer bladder wall annotated using dicom viewing software microdicom sofia bulgaria annotation mask extracted dicom image using python software mask dicom image de-identified image down-sampled feeding neural network physical scale extracted dicom image used volume calculation pre-processing avoided integrated portable wearable device beam forming grid adjusted produce required input size network architecture baseline architecture deep neural network image segmentation typically encoder-decoder structure encoder extract feature input image different resolution field view decoder aggregate feature generate segmentation mask nns used segmentation variation encoder-decoder structure specifically three main variant explored analyze performance binarization quantization technique u-net lightweight decoder panoptic feature pyramid network output merging information decoder layer deeplabv3+ spatial feature pooling baseline full precision format network billion floating-point operation flop million network parameter extremely high low-power wearable application efficient alternative network brahma used depthwise separable convolution binarization convolutional layer distributed learning real-valued parameter-free skip connection maintain accuracy model brahma used baseline paper network quantization b+fp model used rsign prelu binarize convolution layer except first layer similar brahma reactnet quantization method robust distribution shift activation non-parametrized alternative binary convolution activation binarized rsign function threshold parameter superscript indicates whether value binary subscript channel number aligned x_i^b= array x_i^ _i^ x_i^ _i^ array aligned similarly weight tensor binarized per channel using aligned w^b= array mean mean array aligned relu replaced prelu three trainable parameter _i\ _i\ _i\ aligned prelu x_i array x_i-\gamma +\eta x_i _i\\ x_i-\gamma +\eta x_i\le array aligned proposed new b+q model remaining module quantized table number bit parameter type determined value distribution binary shift value s=clamp round replaced multiplication required batchnorm sign absorbed binary weight tensor conv layer immediately preceding layer shown bi-real net floating-point skip connection greatly enhanced performance binary network however skip connection memory-intensive component inference shown fig therefore experiment performed determine skip connection bitwidth optimal trade-off memory requirement accuracy since skip connection different range binary shift parameter used skip connection table layer precision model version floating-point binary quantized full size table skip connection compression skip connection quantized easier compress paper evaluates variety lightweight compression scheme context using intermediate feature map test dataset worst-case memory requirement compressed data recorded zero-value compression zvc includes bit stream indicates whether value zero followed non-zero value differential zvc dzvc take advantage spatial correlation imaging application bit stream indicates whether difference previous value zero followed new value bit-plane compression bpc complicated compression scheme based kim block size explored adapt application encoding exchanged fourth compression method enhanced version bpc ebpc consists zvc followed bpc threshold binary convolutional layer quantized 4-bit signed integer fixed range incompatible skip connection number representation instead increasing number bit skip connection achieve compatibility storing binarized skip connection separately preserved accuracy minimal memory overhead inner outer bladder wall annotation although bladder volume calculation required inner bladder wall segmentation hypothesized providing outer bladder wall annotation would help network extract imaging feature better training test hypothesis two identical model trained except one one-channel output two-channel output one-channel output model included inner bladder wall whereas two-channel output model used inner outer bladder wall two-channel output average dice score output map used cost function whereas inference filter corresponding inner bladder wall used volume estimation urine volume depends inner bladder wall two model dice score inner bladder wall compared test hypothesis algorithm training hyper-parameters bladder dataset consisted sagittal transverse image patient image used train network used validation dataset tuning hyperparameters test dataset consisted pair sagittal transverse image training set augmented applying affine transformation horizontal flip shearing rotation random angle image training epoch model trained pytorch custom backpropagation function used dice score loss function cosine annealing scheduling policy warm restarts initial learning rate 0.005 used training weight decay 4\times 10^ used model training regularization weight decay used b+fp b+q model b+q model trained step first trained b+fp model scratch epoch learned b+fp model parameter used initialize b+q network additional epoch performed model highest validation accuracy among epoch used since binarization function differentiable differentiable surrogate required backpropagation b+fp b+q model standard straight-through estimator ste hyperbolic tangent experimented surrogate shown supplementary fig b+q model ste converged optimal solution therefore model reported paper trained ste volume estimation pixel segmented bladder area sagittal transverse view counted separately bladder area converted pixel count square centimeter using physical scale information dicom file used formula double area method aligned 0.8304 0.5625\times 0.7211\times ~\textrm aligned sag bladder area sagittal plane trans bladder area transverse plane volume estimation performed ground truth clinician annotation model output result compared evaluation segmentation network evaluated three criterion segmentation clinical accuracy memory requirement computation requirement calculate dice score b+fp version u-net deeplabv3+ panoptic model output mask b+q version best-performing model developed multiple version model compared clinician annotation using bland-altman plot confidence interval labeled since clinician annotation considered reliable neural network model clinician volume estimate used x-axis instead mean method moreover used concordance correlation coefficient analyze agreement model clinical ground truth two type memory requirement first consists neural network parameter must permanently stored on-chip past work termed reduction model compression ratio second type memory requirement occurs inference rarely discussed past work memory required store intermediate feature map later use model case u-net supplementary fig four horizontal arrow indicating skip connection encoder decoder represent type memory requirement report multiplies accumulates mac required computation requirement important note floating-point computation much energy chip area intensive binary computation binary mac need single xnor followed count operation quantized mac count mac -bit number -bit number a\times binary mac please refer supplementary information detail memory computation requirement obtained result discussion selection algorithm three criterion used select optimal baseline model accuracy table memory requirement fig computation requirement fig table dice score model within u-net performed best binarizing convolutional layer figure showed deeplab 8\times\ computationally intensive two alternative u-net panoptic compared fig required similar amount binary floating-point computation even though u-net required multiplication batchnorm avgpool replaced binary shift operation b+q model b+q model shown fig u-net b+fp model required memory panoptic deeplab b+fp model respectively since u-net b+fp model highest accuracy needed least memory computation chosen baseline architecture shown supplementary fig shown fig binarization convolutional layer reduced network parameter size skip connection size case u-net b+fp model floating-point skip connection required 5.9\times\ memory model parameter combined motivated development b+q model quantized skip connection table image segmentation dice score full size table figure memory requirement b+fp model column corresponding model followed b+fp model algorithm b+fp model typically consume half memory model u-net lowest memory requirement three algorithm full size image figure computation requirement unit million mac deeplabv3+ model requires 7\times\ computation u-net panoptic orange bar used floating-point mac blue bar indicate equivalent binary mac model defined table conv convolution avgpool average pooling batchnorm prelu parametrized relu full size image skip connection quantization compression since distribution prelu symmetric respect experiment showed unsigned representation led higher accuracy signed representation using bit-width test accuracy 6-bit 4-bit 3-bit skip connection 87.0 85.8 71.8 respectively increasing bit-width beyond bit increased memory requirement linearly without significantly improving accuracy 3-bit version 14\ worse 4-bit version rendering unacceptable clinical usage therefore model 4-bit 6-bit skip connection bit-width i.e b+q model b+q model investigated detail memory computation various b+q u-net model b+fp baseline found supplementary table quantization limited possible data value lending well compression instance 3.4\ value floating-point skip connection zero versus 38.3\ quantization therefore compression technique exploit presence zero would efficient quantized data four lossless compression method applied quantized intermediate feature map described method section best compression technique model plotted fig ebpc dzvc offered similar efficiency b+q model dzvc selected due straightforward implementation b+q model ebpc offered best compression achieved storage reduction advantage binarization quantization compression asic design drastic reduction memory requirement model compressed b+q model translates directly 14\times\ reduction memory area binary accelerator memory typically dominates chip area binarization also significantly reduces energy cost energy cost mac dominated multiply operation around 100\times\ binary mac dominated accumulation algorithm runtime heavily dependent target hardware platform reduced computation memory access lead much higher segmentation frame rate interested reader referred follow-up work 14.4\mu -per-inference real-time asic implementation compressed b+q model figure memory requirement b+fp b+q model u-net blue bar indicate permanent memory requirement model parameter orange bar indicate additional memory requirement inference applying best compression algorithm b+q model last two column show skip connection memory reduced respectively full size image effect outer bladder wall annotation outer bladder wall annotation aided better extract feature information backpropagation training process thereby leading significantly higher dice score dice score improved 4.5 3.3 4.3 b+fp b+q model respectively detail supplementary table clinical evaluation figure compared bladder volume estimate nns radiologist using bland-altman analysis mean volume estimation error b+q model 4-bit 6-bit skip connection 5.0\pm 33\ 6.8\pm 29\ mean standard deviation full precision method performed better error 2.6\pm 19\ cost excessive computation memory space bias model 7.3 reasonable compared bias men woman mark concordance correlation coefficient cccs model b+fp model 0.984 0.969 b+q model eliminated use operation presented minimal degradation b+fp model 0.962 ccc b+q model slight degradation volume estimation ccc 0.949 example segmentation result shown fig image algorithm able segment bladder inner wall properly despite presence foley catheter inside bladder figure showed example poorly defined bladder wall right side poorly defined wall led segmentation error propagated estimating bladder volume figure example bladder image showcasing algorithm ability estimate bladder wall correctly despite presence foley catheter example case poorly defined bladder wall right hand side leading poor segmentation result full size image figure bland-altman plot downstream volume estimation task since clinician annotation considered ground truth used x-axis instead average clinician annotation u-net model estimate volume estimate use segmentation output b+fp b+q model respectively middle horizontal line represent average difference i.e bias volume estimation segmentation approach clinician segmentation upper line lower line indicate confidence interval mean difference full size image future work application unsupervised learning enables use larger dataset emerging unproven technique ultrasound imaging potential direction apply existing unsupervised learning technique domain ultrasound quantization compression technique applied reduce memory computation regardless training procedure paper binarization compression technique applied medical application instance ouyang implemented lightweight seizure classification neuromodulation implant device however larger nns provide detailed seizure classification implemented device due computation memory constraint algorithm technique reduce memory computation requirement utilize sophisticated nns biomedical device conclusion developed evaluated low-memory low-compute deep-learning model bladder segmentation urine volume estimation compared prior work eliminated need floating-point computation reduced memory requirement fit low-cost microcontrollers detailed comparison supplementary table skip connection quantization b+q b+q model reduced total memory requirement 11.5\times\ 9.0\times\ using dzvc b+q total memory reduced 23\ using ebpc b+q 36\ memory requirement reduced reduction ram requirement make algorithm friendlier deploy edge device area-constrained low-cost asics accuracy b+q b+q model within 3.8\ 2.6\ state-of-the-art segmentation model required hundred million floating-point operation much memory-intensive proposed model bladder volume calculated model par volume ground-truth clinician annotation cccs 0.962 0.949 availability low-compute low-memory accurate automated bladder volume monitoring algorithm enable development low-cost smart ultrasound device help diagnose pour early stage prevent cauti reducing catheterization using continuous bladder volume monitoring case study compression quantization technique applied image segmentation model would beneficial deploy computation memory constrained wearable medical device