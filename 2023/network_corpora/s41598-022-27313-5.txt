introduction friendship paradox well-known graph-theoretical statement relationship node degree number neighbor friend first-order quantity friend degree second-order quantity simple connected finite graph fact graph mean latter smaller mean former meaning gap difference non-negative regardless whether calculate second-order mean node level network level directly network level non-regular graph statement may strengthened strict inequality way friendship paradox establishes fundamental property node degree key concept pure graph theory analysis web large networked system friendship paradox come two related form represent natural way formalizing gap one degree node friend feature separately final mean essentially aggregate edge separately refer list version node contributes list number friend degree final mean second version node first calculate average degree friend second-order degree node average final mean refer singular version node contributes one number mean friend degree final mean intuitive think degree node attribute next thought whether number assigned attribute would produce result similar degree act attribute eom looked paper generalizing friendship paradox generalized friendship paradox gfp claimed long degree sequence attribute sample non-regular simple connected finite graph positively correlated gap second-order mean first order mean positive i.e list version gfp hold note graph need non-regular degree-attribute correlation defined either degree attribute graph node equal undefined regular graph graph attribute equal gap would result eom make concrete important finding network structure many correlate degree seem satisfy principle friend do. relevant many context world wide web different type user activity often positively correlated user degree underlying social network example influential early analysis facebook network paradigmatic example large web-based social medium system ugander showed attribute time spent site exhibited analogue friendship paradox observed correlation time site number friend made finding natural correlation degree activity also form part motivation using individual social network degree immunization strategy social comparison theory suggests greater average degree one friend may source comparison eom claim concerned specifically list edge-based network-level version paradox noted version attribute node friend feature separately final mean part fraction representing node single-number second-order quantity indeed suppose simple connected finite graph node degree d_i\ attribute a_i\ degree sequence mean standard deviation s.d indicating non-regularity degree attribute sample s.d indicating non-regularity attribute degree-attribute correlation list version gap expressed list since positive attribute sample positive satisfies list version gfp lgfp attribute sample zero correlation make gap negative fails lgfp contrast regular friendship paradox zero lgfp gap doe make statement graph regularity since domain non-regular graph given generality result important understand whether also hold singular version friendship paradox since would direct way formalize idea attribute positively correlated degree including online activity metric friend important emphasis individual singular-number second-order value implying averaging node paper start surprising fact principle attribute positively correlated degree lead gap positive false general statement singular version generalized friendship paradox given naturally list version friendship paradox generalizes attribute positively correlated degree striking see gfp fail singular version notable since two version original friendship paradox tend behave similarly mathematical sense exhibit roughly property whereas failure generalization one version drive unexpected technical wedge paper explores condition required singular version gfp fail hold refer singular version gfp sgfp discus degree-attribute correlation close want find graph topology attribute assignment sgfp fails path correlation section also path correlation infinity number node path infinity number node section mention correlation fail sgfp topology calculation would reduce singular friendship paradox full proof supplementary information also show split graph topology find attribute sample positive value sgfp fails—so-called anti-sgfp topology find sample meaning attribute sample leaf sgfp standing—pro-sgfp topology differentiating pro- anti-sgfp graph section also explore often random network pro-sgfp number node grows common high sgfp-failing correlation may random anti-sgfp network pro-sgfp topology common section finally turn real-world data see real attribute may fail sgfp failing sgfp real network data section also find non-trivially large sgfp-failing correlation may real social network explore happens remove social structure rewiring graph finding high sgfp-failing correlation real network section definition domain simple connected finite graph looking connected graph similar friendship paradox result easily generalized disconnected graph including isolates graph disjoint connected component size gap calculated node-by-node without regard disconnectedness note graph regularity play role discussion would generalize graph regularity within component case multiple component isolated node whose second-order attribute undefined simply disregard dealing real data follow principle calculate gap theoretical part paper assume connectedness rule isolates iterate node index computing various value node graph node let d_i\ degree a_i\ attribute attribute assignment use term attribute sample attribute assignment interchangeably let s_i\ singular second-order attribute i.e single-number mean friend attribute let degree sequence mean attribute sample mean set second-order attribute mean let gap equal difference mean second-order attribute mean first-order attribute aligned i=1 s_i i=1 a_i aligned also written compactly detail aligned i=1 d_i a_j i=1 a_i aligned set neighbor friend also useful express gap differently first term equation index refers node seed index friend look seed calculation second-order attribute opposite see node attribute feature friend second-order value coefficient second-order mean equal time sum friend reciprocal degree aligned j=1 a_j d_k j=1 a_j aligned set friend call d_k sum friend reciprocal degree _j\ could also write aligned j=1 a_j j=1 a_j aligned say sgfp fails hold otherwise degree attribute graph degree-attribute correlation undefined case gap sgfp fail see supplementary information proof graph exhibit regularity degree attribute produce gap case happens see end differentiating pro- anti-sgfp graph section detail sgfp important think gap implying graph regularity simple example consider path graph x-y-z\ a_x\ a_y\ a_z\ attribute gap equal a_x+a_z a_y a_y a_x+a_y+a_z =-\frac a_x +\frac a_y -\frac a_z equal a_x+a_z=2a_y\ path graph x-y-z\ attribute neither regular attribute produce gap dealt regular case assume simple connected finite graph non-regular attribute sample value correlation degree sequence attribute sample defined measure linear dependence given aligned i=1 a_i d_i i=1 a_i i=1 d_i aligned path correlation claim graph topology attribute assignment degree-attribute correlation 1-\epsilon\ sgfp fails section construct one example set graph specific set contains graph fit requirement 1-\epsilon\ sgfp failing take graph node attribute assignment sgfp fails meaning gap negative take look example fig figure starting sgpf-failing graph could grow adding node new graph still fails sgfp degree-attribute correlation approach full size image graph fig gap equal aligned 2+3 +\frac 2+3 2+3+3 +\frac 2+3+3 3+3+10 +\frac 3+3+10 +\frac -\frac 2+2+3+3+3+3+10+10 -\frac aligned degree-attribute correlation graph -\frac -0.80\ suppose add new node graph two node degree attribute second-degree attribute triple-2 node two node degree attribute second-degree attribute triple-3 node keeping degree attribute second-order attribute original node graph fig perform first step shown fig figure adding node specific way preserve singular generalized friendship paradox gap sign increase degree-attribute correlation limit figure example first step process new node edge green full size image triple-2 node come two node attribute second-order attribute s_i\ indeed friend second-order attribute affected effectively taking place former attribute-2 friend friend similarly adding triple-3 node certain way ensures second-order attribute preserve second-order attribute friend help rewrite gap yet another way aligned i=1 s_i a_i\right aligned since new node s_p a_p\ new node add nothing sum doe however increase number node gap remains negative decrease absolute value discus detail possible counter gap convergence slightly elaborate way adding node know add node graph change sign gap let call adding node step induction since perform procedure graph fig induction step gap still negative let number initial fig node step triple-2 node triple-3 node added n=8+4k\ node degree-attribute correlation given aligned i=1 a_i d_i i=1 a_i i=1 d_i aligned mean graph attribute sample degree sequence respectively step interested limit infinity since k\rightarrow =\lim k\rightarrow =2.5\ k\rightarrow equal aligned k\rightarrow i=1 a_i 2.5 d_i 2.5 0.5^2 i=1 a_i 2.5 0.5^2\right i=1 d_i 2.5 0.5^2 aligned sum finite number write constant aligned k\rightarrow k\rightarrow c_1 c_2 c_3 aligned aligned k\rightarrow c_1 c_2 c_3 c_2 c_3 k^2 aligned adding triple-2 triple-3 node time preserve negative gap grows correlation limit different construction may surpass 1-\epsilon\ fewer step depending degree-attribute correlation original graph purposely taken low example also possible counter gap convergence instead keeping gap constant step since goal provide example path gap negative step large absolute value detail technique shown graph topology attribute assignment degree-attribute correlation 1-\epsilon\ gap negative correlation graph fig shown fig figure degree-attribute correlation 8-node example fig add pair triple-2 triple-3 node full size image path constructed limit destination reached attribute sample =1\ fail sgfp case =1\ calculation sgfp gap simplifies gfp gap know gfp hold non-regular connected graph domain please see supplementary information detailed proof path infinity number node earlier construction produced sequence graph attribute sample whose correlation degree sequence converged gap negative step sequence size graph became arbitrarily large natural ask necessary possible fixed finite graph topology sequence attribute sample negative gap degree-attribute correlation converging section show possible able show following result every finite graph constant attribute sample whose correlation degree sequence exceeds _g\ must produce non-negative gap thus every graph threshold strictly correlation threshold fail sgfp show consider graph degree sequence attribute sample set attribute node indexed way degree degree-attribute correlation well-defined sequence attribute sample collection sample purpose converges denote individual node attribute a_i^ establish gap attribute sample must eventually become non-negative move sequence start following fact every exists following hold x_1 x_n y_1 y_n vector i=1 x_i^2 i=1 y_i^2 i=1 x_i y_i y_i| prove fact ^2/2\ using value term first observe aligned i=1 x_i y_i ^2= i=1 x_i^2 x_i y_i y_i^2 i=1 x_i^2 i=1 y_i^2 i=1 x_i y_i aligned thus aligned x_i y_i i=1 x_i y_i aligned taking square root y_i| prof fix non-regular graph node -dimensional vector a_1 a_n view assignment attribute value node let g_h gap vector attribute gap definition paper vector degree d_1 d_n gap g_h constant g_h singular version friendship paradox g_h unaffected add constant coordinate see supplementary information proof mean subtract mean a_i\ sum coordinate following equation aligned g_h i=1 a_i aligned applying vector degree let average degree let i=1 d_i let d_i vector unit vector whose coordinate sum i=1 _i^2 since d/\omega constant aligned g_h i=1 g_h g_h/\omega aligned suppose sequence attribute vector g_h correlation converges infinity since correlation two vector unaffected subtract constant coordinate one vector multiply vector positive coefficient assume without loss generality unit vector whose coordinate sum applying argument transform follows correlation vector converges infinity two unit vector whose coordinate sum correlation simply inner product since case numerator expression correlation i=1 x_i y_i\ denominator square root i=1 x_i^2\right i=1 y_i^2\right therefore correlation inner product i=1 a_i^ _i\ let maximum value _i\ coefficient expression gap apply initial fact g_h/ obtain corresponding ^2\ since correlation converges infinity value correlation greater i=1 a_i^ section show possible able show following result every finite graph constant attribute sample whose correlation degree sequence exceeds _g\ must produce non-negative gap thus every graph threshold strictly correlation threshold fail sgfp show attribute sample whose correlation degree sequence exceeds must produce non-negative gap fact correlation greater _i| aligned g_h g_h i=1 a_i^ i=1 aligned aligned i=1 g_h g_h g_h aligned thus g_h g_h g_h contradicts fact g_h g_h/\omega\ g_h contradiction establishes sequence produce negative gap whose correlation hence converges finite graph given result consider set s_g\ property attribute sample whose correlation degree sequence exceeds must produce non-negative gap set infimum denote _g\ property topology degree-attribute correlation _g\ might fail sgfp degree-attribute correlation differentiating pro- anti-sgfp graph given discussion far natural ask graph property exists attribute sample fails sgfp call graph anti-sgfp topology since capable refuting sgfp graph doe property call pro-sgfp pro-sgfp topology would imply positive gap =0\ gap negative gap case non-regular connected topology list version gfp tractable characterization anti-sgfp pro-sgfp graph establish clean characterization showing whether graph anti-sgfp pro-sgfp first consider graph attribute assignment recall supplementary information adding constant attribute change gap also change correlation since correlation formula subtract a_i\ a_i\ grows grows exactly thus sgfp-failing attribute assignment change mean subtracting original mean attribute value retain sgfp-failing property meaning find attribute assignment a'\ fails sgfp find attribute assignment characteristic additional constraint gap formula becomes aligned i=1 d_i a_j aligned given discussion _i\ aligned i=1 a_i aligned d_j correlation becomes aligned a_i d_i a_i^2 d_i aligned correlation positive numerator positive aligned a_i d_i aligned get aligned a_i d_i a_i a_i d_i a_i a_i d_i a_i d_i aligned attribute assignment mean assignment fails sgfp constraint aligned a_i aligned aligned d_i a_i aligned aligned a_i aligned given graph want see find attribute assignment satisfies constraint anti-sgfp graph pro-sgfp graph want show satisfy a_i a_i negative gap d_i a_i zero correlation graph also able satisfy d_i a_i positive correlation let say attribute sample =0\ g_0 a_i meaning sgfp fails let node highest-degree node one node lowest-degree node one since graph non-regular know d_i d_j\ raise a_i\ decrease a_j\ remain change d_i a_i\ d_i- d_j satisfy inequality get change gap order keep gap negative inequality satisfied need _j\ good _j\ choose aligned n|x| aligned sgfp-failing attribute assignment =0\ also one mean replace constraint aligned d_i a_i aligned aligned d_i a_i aligned also replace aligned a_i aligned equivalent pair inequality aligned a_i aligned aligned -a_i aligned final system inequality aligned array aligned a_i -a_i d_i a_i a_i aligned array aligned use farkas lemma deal farkas lemma let matrix vector exists vector satisfying doe exist vector satisfying system fit naturally format system farkas lemma let vector a_1 a_2 a_n vector matrix row columms first column d_1 d_2 d_n second column third column -1\ system inequality indeed farkas lemma system solution word graph pro-sgfp graph system solution would mean since three column 3-dimensional vector x_1 x_2 x_3 row corresponds equation d_i x_1 x_2 x_3 _i\ unnecessary write x_2 x_3\ x_2\ x_3\ non-negative equation one instead define variable x_2 x_3\ notice arbitrary number necessarily non-negative since equal one arbitrary non-negative number minus another one hence anything let also rewrite x_1\ therefore system solution find two number unconstrained sign d_i _i\ graph pro-sgfp graph two number exist otherwise anti-sgfp graph note _i\ connected graph equal regular graph see supplementary information proof domain non-regular connected graph know d_i\ _i\ variation mean graph domain degree-delta correlation defined pro-sgfp graph equal since would mean _i\ complying case mean =1\ non-regular connected graph pro-sgfp =1\ anti-sgfp otherwise note graph two node d_i d_j _j\ would sufficient necessary graph anti-sgfp mean attaching path p-q-r-s-t\ graph node would make said graph anti-sgfp node would degree d_q +\frac d_s =\frac +\frac =1\ _s=\frac d_r +\frac d_t =\frac +\frac =1.5\ attaching two leaf node different-degree node graph would make graph anti-sgfp well since two leaf node would different _i\ clear regular graph part domain defined characterized pro-sgfp satisfy property interesting think property part regularity regular graph could think pro-sgfp graph semi-regular satisfy property first requirement regular graph actually node sharing degree second requirement regular graph pro-sgfp graph fact find attribute sample negative gap mean possible attribute sample gap non-negative strengthen gap positive suppose pro-sgfp graph attribute sample shown alter mean keep gap constraint aligned array aligned a_i d_i a_i i\text d_i _i\\ aligned array aligned second constraint satisfying positive correlation requirement third constraint indicating graph pro-sgfp sign a_i\ would indicate sign gap expressing a_i\ term d_i\ given third constraint get aligned a_i d_i a_i aligned finally aligned a_i d_i a_i a_i aligned first term positive multiplication constraint second term first constraint mean a_i\ positive pro-sgfp topology implies specifically positive gap changing sign second constraint indicate zero negative also see =0\ gap negative overall mean pro-sgfp topology sign determines sign sgfp gap discussion list version gfp eom noted non-regular connected topology sign determined sign lgfp gap mean vocabulary non-regular connected topology pro-lgfp starkly different sgfp strict constaint =1\ simple example pro-sgfp graph star graph one node connected many leaf node consider also one complete graph k_n\ labeled network k_n complete graph missing edge fact k_n knee graph pro-sgfp two kind degree n-1\ n-2\ node share degree also share _i\ due symmetry =1\ another thing note pro-sgfp topology =0\ example non-regular graph differing attribute producing gap value indicating regularity mentioned case introduction section fact 3-node path described pro-sgfp final point =0\ may always produce gap anti-sgfp topology example see fig first note graph d_i\ _i\ lie straight line graph anti-sgfp note attribute sample 1,1,2,0 1,1,1,0 1,1,3,0 correlation degree sequence 1,3,2,2 finally note different sign gap case gap indicate regularity degree attribute graph pro-sgfp pro-sgfp topology would produce gap =0\ anti-sgfp topology may may figure anti-sgfp graph may produce differently-signed gap =0\ depending attribute sample full size image pro-sgfp topology common given farkas lemma discussion differentiating pro- anti-sgfp graph section graph two differing degree two differing _i\ true non-regular graph pro-sgfp mean =1\ common pro-sgfp topology practice come simple answer question use random graph generator p=\frac make edge arrangement confused topology nodeid-agnostic equally likely restrict generator non-regular connected graph create 100,000 graph n=3,4 10\ addition seeing proportion graph pro-sgfp also want find high sgfp-failing attribute sample may see use simplex optimization specifically high performance dual revised simplex implementation algorithm constraint obtained differentiating pro- anti-sgfp graph section aligned array aligned a_i -a_i d_i a_i a_i aligned array aligned third constraint given first two numerator denominator sum square element a_i^2 note rescale element attribute sample a_i^2 change sign gap see supplementary information proof hence assume attribute sample follows a_i^2 d_i a_i\ third constraint like maximize d_i a_i\ given constraint fourth constraint represents negative gap change a_i -0.001\ purpose linear optimization removing strict inequality allow achieve true maximum sgfp fails optimization still useful true maximum correlation least large find note also may achievable maximum instead supremum connected discussion _g\ path infinity number node section call correlation obtain high correlation instead max correlation denote high _g\ given graph table provides resulting proportion pro-sgfp graph well high _g\ pro- anti-sgfp graph clear number node increase pro-sgfp topology seen often predicted pro-sgfp topology found =1\ interestingly high even anti-sgfp topology naturally pro-sgfp topology high _g\ positive since attribute sample fail sgfp pro-sgfp topology anti-sgfp topology high _g\ around 0.25 pro-sgfp proportion grows non-trivial pro-sgfp topology easily described star graph k_n graph mentioned end differentiating pro- anti-sgfp graph section overall though hard characterize specific look pro-sgfp graph looking whether way n=3\ graph generator found pro-sgfp topology anti-sgfp topology 3-node connected non-regular topology 3-node path k_3 n=4\ pro-sgfp topology found path graph w-x-y-z\ star graph connected complete graph node one edge removed k_4 table n=3,4 10\ used graph generator find 100,000 instance non-regular connected network table describes proportion pro-sgfp correlation may fail sgfp pro- anti-sgfp graph degree-delta correlation two group full size table failing sgfp real network data interesting whether attribute sample available part real-world data may fail sgfp provide instance happens looked anonymized network facebook100 dataset see detail data useful dataset disconnected school network provides multiple related instance average network size 12,803.16 dataset come lot numerical attribute one useful field gender equal male female reported looked one network time node created data-driven attribute prop_own indicated proportion friend shared gender value attribute sample place able calculate degree-attribute correlation sgfp gap figure plot school point red represent school positive negative gap demonstrating failure sgfp directly instance note used data-driven attribute facebook100 network fail sgfp case network anti-sgfp mean construct sgfp-failing attribute sample high network next section figure plotting gap facebook100 network proportion friend reported gender including null attribute school gap negative positive real-world example failing sgfp attribute positively correlated degree full size image finding high sgfp-failing correlation real network another interesting question ask facebook100 data high sgfp-failing attribute sample assigned real graph represents school see use optimization technique introduced pro-sgfp topology common section find high _g\ school expect negative correlation high _g\ since implies graph pro-sgfp sgfp-failing correlation bound high _g\ negative lower graph anti-sgfp could expect find positive sgfp-failing correlation optimization high find high network meaning anti-sgfp blue point fig represent high _g\ school correlation blue point -0.85 strong linear relationship also interesting whether relationship influenced social structure inherent facebook100 data check rewire network using configuration model removing parallel edge self-loops resulting network like original facebook100 graph may contain isolates computing gap disregard also weight optimization plot high _g\ rewired network red fig correlation -0.98 red point value similar random network pro-sgfp topology common section table striking difference two set point suggests given degree sequence social structure play role come higher possible sgfp-failing degree-attribute correlation result also suggest given degree sequence social structure provides smaller figure facebook100 data possible find sgfp-failing attribute sample 0.45 remove social structure configuration model correlation find simplex optimization much lower full size image conclusion contrast friendship paradox list network-level generalized friendship paradox singular node-level generalized friendship paradox phenomenon applies network general regardless structure degree-attribute correlation parameter determines whether sgfp hold correlation positive close mean sgfp fail network structure pro-sgfp sgfp fail degree-attribute correlation negative network structure anti-sgfp sgfp may fail negative positive degree-attribute correlation would also hold negative correlation attribute sample -a\ positive sgfp fails =-r_ =-g given data analysis simulation conclude anti-sgfp topology common high sgfp-failing correlation depends specific anti-sgfp graph topology shown discussion high _g\ pro-sgfp topology common finding high sgfp-failing correlation real network section taking together conclude simply assume friend attribute greater yours. real-world network want study need checked whether sgfp applies given structure attribute sample